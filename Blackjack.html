<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --felt: #0a5c2f;
      --felt-dark: #084826;
      --black: #0b0b0b;
      --red: #b30000;
      --green: #0f7a2a;
      --gold: #d4af37;
      --gold-light: #f4e5a6;
      --panel: rgba(0,0,0,0.35);
    }

    body {
      background: radial-gradient(circle at center, var(--felt) 0%, var(--felt-dark) 100%);
      font-family: "Segoe UI", Arial, sans-serif;
      height: 100vh;
      overflow-x: hidden;
    }

    /* Table Frame */
    .table-frame {
      width: 95%;
      max-width: 900px;
      padding: 30px;
      border-radius: 50px;
      background: rgba(0,0,0,0.2);
      border: 4px solid var(--gold);
      box-shadow: 0 0 40px rgba(0,0,0,0.6), inset 0 0 40px rgba(0,0,0,0.3);
    }

    /* Card style */
    .card {
      width: 70px;
      height: 100px;
      border-radius: 0.6rem;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      font-weight: bold;
      border: 2px solid var(--gold);
      box-shadow: 0 0 12px rgba(212,175,55,0.25);
      margin-right: 0.5rem;
      color: black;
    }

    .card.back {
      background: var(--black);
      border-color: #222;
      box-shadow: inset 0 0 15px rgba(0,0,0,0.8);
    }

    /* Buttons */
    .casino-btn {
      border: 2px solid var(--gold);
      border-radius: 12px;
      color: var(--gold-light);
      padding: 10px 18px;
      font-weight: 600;
      transition: 0.25s ease;
      background: rgba(255,255,255,0.07);
      backdrop-filter: blur(4px);
    }

    .casino-btn:hover { background: var(--gold); color: black; }

    .green-btn:hover { background: var(--green) !important; color: white !important; }
    .red-btn:hover { background: var(--red) !important; color: white !important; }
  </style>
</head>

<body class="text-white flex flex-col items-center p-6">

  <h1 class="text-5xl font-extrabold mb-6"
      style="background: linear-gradient(90deg, var(--gold-light), var(--gold));
             -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
    Blackjack
  </h1>

  <!-- BANK PANEL -->
  <div class="table-frame mb-6">
    <div class="flex justify-between items-center mb-4 text-xl font-semibold">
      <p>Bank: <span id="bank" class="text-green-400">$500</span></p>
      <div class="flex items-center gap-3">
        <input id="bet" type="number" value="10" min="1" class="text-black px-2 py-1 rounded" style="width:80px;"/>
        <button id="placeBet" class="casino-btn green-btn">Bet</button>
      </div>
    </div>

    <!-- GAME AREA -->
    <div class="py-4">
      <h2 class="text-2xl mb-2 font-semibold text-red-400">Dealer</h2>
      <div id="dealer-cards" class="flex mb-1"></div>
      <p id="dealer-total" class="opacity-70 mb-4 text-lg">Total: ?</p>

      <hr class="border-yellow-600 my-4" />

      <h2 class="text-2xl mb-2 font-semibold text-green-300">Player</h2>
      <div id="player-cards" class="flex mb-1"></div>
      <p id="player-total" class="opacity-70 text-lg">Total: 0</p>

      <p id="message" class="text-center text-xl font-bold mt-4 h-8"></p>

      <div class="flex justify-center gap-4 mt-5">
        <button id="hit" class="casino-btn green-btn hidden">Hit</button>
        <button id="stand" class="casino-btn red-btn hidden">Stand</button>
        <button id="restart" class="casino-btn hidden">Restart</button>
      </div>
    </div>
  </div>

  <script>
    const suits = ["♠", "♥", "♦", "♣"];
    const values = ["A", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K"];

    let bank = 500;
    let currentBet = 0;
    let deck = [];
    let dealerHand = [];
    let playerHand = [];
    let gameOver = false;
    let bettingLocked = false;

    function createDeck() {
      deck = [];
      for (let s of suits) for (let v of values) deck.push({ suit: s, value: v });
      deck.sort(() => Math.random() - 0.5);
    }

    function getValue(card) {
      if (["J", "Q", "K"].includes(card.value)) return 10;
      if (card.value === "A") return 11;
      return parseInt(card.value);
    }

    function handTotal(hand) {
      let total = hand.reduce((sum, c) => sum + getValue(c), 0);
      let aces = hand.filter(c => c.value === "A").length;
      while (total > 21 && aces-- > 0) total -= 10;
      return total;
    }

    function renderCards() {
      const dealerDiv = document.getElementById("dealer-cards");
      const playerDiv = document.getElementById("player-cards");
      dealerDiv.innerHTML = "";
      playerDiv.innerHTML = "";

      dealerHand.forEach((c, i) => {
        const div = document.createElement("div");
        div.className = "card" + (i === 0 && !gameOver ? " back" : "");
        div.textContent = i === 0 && !gameOver ? "" : c.value + c.suit;
        dealerDiv.appendChild(div);
      });

      playerHand.forEach(c => {
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = c.value + c.suit;
        playerDiv.appendChild(div);
      });

      document.getElementById("player-total").textContent = "Total: " + handTotal(playerHand);
      document.getElementById("dealer-total").textContent = gameOver ? "Total: " + handTotal(dealerHand) : "Total: ?";
    }

    function dealInitial() {
      playerHand = [deck.pop(), deck.pop()];
      dealerHand = [deck.pop(), deck.pop()];
      renderCards();
    }

    function endGame(message, payout = 0) {
      gameOver = true;
      bank += payout;
      document.getElementById("bank").textContent = "$" + bank;
      document.getElementById("message").textContent = message;

      document.getElementById("hit").classList.add("hidden");
      document.getElementById("stand").classList.add("hidden");

      bettingLocked = false;
      renderCards();

      if (bank <= 0) {
        document.getElementById("restart").classList.remove("hidden");
      }
    }

    document.getElementById("hit").onclick = () => {
      if (gameOver) return;
      playerHand.push(deck.pop());
      renderCards();
      if (handTotal(playerHand) > 21) endGame("You busted!", 0);
    };

    document.getElementById("stand").onclick = () => {
      if (gameOver) return;
      gameOver = true;

      while (handTotal(dealerHand) < 17) dealerHand.push(deck.pop());

      const p = handTotal(playerHand);
      const d = handTotal(dealerHand);

      if (d > 21) endGame("Dealer busts! You win!", currentBet * 2);
      else if (p > d) endGame("You win!", currentBet * 2);
      else if (p < d) endGame("Dealer wins.");
      else endGame("Push.", currentBet);
    };

    document.getElementById("restart").onclick = () => {
      bank = 500;
      document.getElementById("bank").textContent = "$500";
      document.getElementById("restart").classList.add("hidden");
      startGame();
    };

    document.getElementById("placeBet").onclick = () => {
      if (bettingLocked || bank <= 0) return;
      const bet = parseInt(document.getElementById("bet").value);
      if (bet < 1 || bet > bank) return alert("Invalid bet amount.");

      currentBet = bet;
      bank -= bet;
      document.getElementById("bank").textContent = "$" + bank;
      bettingLocked = true;

      startGameAfterBet();
    };

    function startGameAfterBet() {
      gameOver = false;
      createDeck();
      dealerHand = [];
      playerHand = [];
      document.getElementById("message").textContent = "";

      document.getElementById("hit").classList.remove("hidden");
      document.getElementById("stand").classList.remove("hidden");

      dealInitial();
    }

    function startGame() {
      gameOver = true;
      document.getElementById("message").textContent = "Place your bet to start.";
      renderCards();
    }

    startGame();
  </script>

</body>
</html>